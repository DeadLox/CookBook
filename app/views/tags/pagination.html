%{
    pageSelected = (int) util.PaginationUtil.getPage(params);
    nbPage = (int) Math.abs(Math.ceil(_total / util.PaginationUtil.getMaxPerPage(params)));
    rechercheParam = "?page=";
    if (request.path.contains("recherche") && params.get('recherche') != null) {
        recherche = params.get('recherche');
        rechercheParam = "?recherche=" + recherche.urlEncode() + "&page=";
    }
/}%
<div class="pagination">
    #{if nbPage > 1}
        <ul class="pagination">
            #{if pageSelected > 1}
                <li><a href="" onclick="changePage(1);return false;">&{'first.page'}</a></li>
                <li><a href="" onclick="changePage(${pageSelected-1});return false;">&{'precedent'}</a></li>
            #{/if}
            #{list items:1..nbPage, as:'page'}
                <li class="#{if pageSelected == page}active#{/if}"><a href="" onclick="changePage(${page});return false;">${page}</a></li>
            #{/list}
            #{if pageSelected < nbPage}
                <li><a href="" onclick="changePage(${pageSelected+1});return false;">&{'suivant'}</a></li>
                <li><a href="" onclick="changePage(${nbPage});return false;">&{'last.page'}</a></li>
            #{/if}
        </ul>
    #{/if}
    <form action="${request.url}" method="GET">
        <input type="hidden" name="recherche" value="${recherche}" />
        <input type="hidden" name="page" value="${pageSelected}" />
        #{select id:'paginationMax', name:'max', items:util.PaginationUtil.listMaxPerPage, class:'form-control', value:util.PaginationUtil.getMaxPerPage(params)/}
    </form>
    <script>
        $(document).ready(function(){
             // DÃ©tecte le changement de limite de pagination et soumet le formulaire
             $('#paginationMax').change(function(){
                console.log($(this).val());
                $(this).parent().submit();
             });
        });

        function changePage(page){
            console.log(page);
        }
    </script>
</div>