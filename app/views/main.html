<!DOCTYPE html>

<html>
    <head>
        <title>#{get 'title' /}</title>
        <meta charset="${_response_encoding}">
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/bootstrap.min.css'}">
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/bootstrap-theme.min.css'}">
        <link rel="stylesheet" media="screen" href="@{'/public/stylesheets/main.css'}">
        #{get 'moreStyles' /}
        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        <script src="@{'/public/javascripts/jquery-1.10.2.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
        <script src="@{'/public/javascripts/bootstrap.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
        #{get 'moreScripts' /}
    </head>
    <body>
        <div class="container">

            #{set loggedMember=controllers.Security.getLoggedMember() /}

            <div class="infoMember">
                <a class="btn btn-danger btn-logout" href="@{Secure.logout()}"><span class="glyphicon glyphicon-log-out"></span> &{'logout'}</a>
                #{if loggedMember.role.libelle.equals("Administrateur")}
                    <a class="btn btn-warning btn-admin" href="@{Administration.index()}">&{'application.administration.user'}</a>
                #{/if}
                <span class="userName">&{'application.login.bienvenue'} <strong>${loggedMember.email}</strong></span>
            </div>

            <h1>
                <img src="/public/images/logo cookbook.png" alt="logo"/>
                <a href="@{Application.all()}">&{'application.titre'}</a>
                <a class="version" href="@{Application.changelog()}">&{'application.version'}</a>
            </h1>

            <div class="menu-bar">
                <a class="btn btn-info btn-addRecette" href="@{Recettes.blank()}"><span class="glyphicon glyphicon-plus"></span> &{'recette.ajouter'}</a>

                <div class="recherche">
                    #{form @Application.recherche(), method:'GET'}
                    <div class="input-group">
                        <input type="text" class="form-control" name="recherche" placeholder="#{if recherche}${recherche}#{/if}#{else}&{'rechercher.texte'}#{/else}">
                        <span class="input-group-btn">
                            <button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-search"></span> &{'rechercher.btn'}</button>
                        </span>
                    </div>
                    #{/form}
                </div>
            </div>

            #{if flash.error}
            <p class="alert alert-danger">
                &{flash.error}
            </p>
            #{/if}
            #{if flash.success}
            <p class="alert alert-success">
                &{flash.success}
            </p>
            #{/if}

            #{doLayout /}
        </div>
    </body>
</html>
